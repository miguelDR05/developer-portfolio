---
import type { Project } from "../interfaces/Project";

const { projects = [] } = Astro.props;
---
<div>
  <h2 class="text-2xl font-bold text-center">Mi portafolio</h2>

  <div class="mt-6">
    <div class="my-slider">
      {projects.map((p:Project) => (
        <div class="px-3" data-id={p.id}>
          <article class="rounded-xl overflow-hidden card-bg">
            <img src={p.image} alt={p.title} class="w-full h-48 object-cover" loading="lazy" />
            <div class="p-4">
              <h3 class="font-semibold text-lg">{p.title}</h3>
              <p class="text-[var(--muted)] mt-2">{p.description}</p>
              <p class="text-[var(--muted)] mt-3 text-sm">{p.stack.join(' · ')}</p>
              <div class="mt-3 flex gap-3">
                {p.demo ? <a href={p.demo} class="text-primary">Ver Demo</a> : null}
                {p.github ? <a href={p.github} class="text-primary">Ver Código</a> : null}
              </div>
            </div>
          </article>
        </div>
      ))}
    </div>
  </div>
</div>

<!-- Inicialización: el script importa desde src/scripts/slider-init.js -->
<script type="module">
  import { initSlider } from '/src/scripts/slider-init.js';
  if (typeof window !== 'undefined') {
    document.addEventListener('DOMContentLoaded', () => {
      console.log('Projects component: DOMContentLoaded -> initSlider()');
      initSlider();
    });
  }
</script>